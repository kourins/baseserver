<!DOCTYPE html>
<html>
  <head>
      <title>socket.io chat</title>
      <!-- スタイルシート　-->
      <link rel="stylesheet" href="css/column.css" type="text/css"/>
      
      <!-- サードパーディjavascript　--> 
      <script src="/socket.io/socket.io.js"></script>
      <script src="https://code.jquery.com/jquery-1.11.1.js"></script>

    </head>

  <body>

    <div class="box" id="F1"><span class="box-title">F1(9983)</span>
      <div id="box-time"></div>
      <div id="box-nowprice"></div>
      <div id="box-breaktime"></div>
      <div id="box-high"></div>
      <div id="box-low"></div>
      <div id="box-times"></div>
      <div id="box-profit1"></div>
      <div id="box-profit2"></div>
    </div>

    <div class="box" id="F2"><span class="box-title">F2(6954)</span>
      <div id="box-time"></div>
      <div id="box-nowprice"></div>
      <div id="box-breaktime"></div>
      <div id="box-high"></div>
      <div id="box-low"></div>
      <div id="box-times"></div>
      <div id="box-profit1"></div>
      <div id="box-profit2"></div>
    </div>

    <div class="box" id="K1"><span class="box-title">K1(6861)</span>
      <div id="box-time"></div>
      <div id="box-nowprice"></div>
      <div id="box-breaktime"></div>
      <div id="box-high"></div>
      <div id="box-low"></div>
      <div id="box-times"></div>
      <div id="box-profit1"></div>
      <div id="box-profit2"></div>
    </div>

    <div class="box" id="N1"><span class="box-title">N1(7974)</span>
      <div id="box-time"></div>
      <div id="box-nowprice"></div>
      <div id="box-breaktime"></div>
      <div id="box-high"></div>
      <div id="box-low"></div>
      <div id="box-times"></div>
      <div id="box-profit1"></div>
      <div id="box-profit2"></div>
    </div>

    <div class="box" id="N3"><span class="box-title">N3(6594)</span>
      <div id="box-time"></div>
      <div id="box-nowprice"></div>
      <div id="box-breaktime"></div>
      <div id="box-high"></div>
      <div id="box-low"></div>
      <div id="box-times"></div>
      <div id="box-profit1"></div>
      <div id="box-profit2"></div>
    </div>

    <div class="box" id="S3"><span class="box-title">S3(4063)</span>
      <div id="box-time"></div>
      <div id="box-nowprice"></div>
      <div id="box-breaktime"></div>
      <div id="box-high"></div>
      <div id="box-low"></div>
      <div id="box-times"></div>
      <div id="box-profit1"></div>
      <div id="box-profit2"></div>
    </div>

    <div class="box" id="SMC"><span class="box-title">SMC(6273)</span>
      <div id="box-time"></div>
      <div id="box-nowprice"></div>
      <div id="box-breaktime"></div>
      <div id="box-high"></div>
      <div id="box-low"></div>
      <div id="box-times"></div>
      <div id="box-profit1"></div>
      <div id="box-profit2"></div>
    </div>

    <div class="box" id="T2"><span class="box-title">T2(8035)</span>
      <div id="box-time"></div>
      <div id="box-nowprice"></div>
      <div id="box-breaktime"></div>
      <div id="box-high"></div>
      <div id="box-low"></div>
      <div id="box-times"></div>
      <div id="box-profit1"></div>
      <div id="box-profit2"></div>
    </div>

    <script>
      #var socketio = io('http://localhost:8080');
      var socketio = io();
      var sBreakTimeInfoList = {};

      $(function(){

        socketio.on('connect',function(){
            socketio.emit('rWebConnect',"rWebConnect")
        });

        socketio.on('sPriceList',function(msg){
            var jsonPriceList = JSON.parse(msg);
            var keyCode;
            for( keyCode in jsonPriceList){
              var pointIndex = "#"+keyCode
              $(pointIndex + ">#box-nowprice").text(jsonPriceList[keyCode][0])
              $(pointIndex + ">#box-time").text(jsonPriceList[keyCode][1])
            }
          });

          socketio.on('sBreakTimeInfo',function(msg){
            sBreakTimeInfoList = JSON.parse(msg);
            
            var keyCode,keyTime
            for( keyCode in sBreakTimeInfoList){
              var tmpJson = sBreakTimeInfoList[keyCode];
              for( keyTime in tmpJson ){

                var pointIndex = "#"+keyCode
                $(pointIndex + ">#box-breaktime").text( keyTime );
                $(pointIndex + '>#box-high').text( tmpJson[keyTime][0] );
                $(pointIndex + '>#box-low').text(  tmpJson[keyTime][1] );
                $(pointIndex + '>#box-times').text(  tmpJson[keyTime][2] );
                $(pointIndex + '>#box-profit1').text(  tmpJson[keyTime][3] );
                $(pointIndex + '>#box-profit2').text(  tmpJson[keyTime][4] );
              }
            }
          });

        });
    </script>
  </body>
</html>
